# Fayette County Republican Party Web App

A modern, accessible, and performant React + Vite application inspired by GretchenWhitmer.com, WhiteHouse.gov, and ForwardParty.com.

## Quick-start

```bash
pnpm i
pnpm dev
```

The app will be served on http://localhost:5173.

## Scripts

| Command       | Description                           |
| ------------- | ------------------------------------- |
| `pnpm dev`    | Run Vite dev server with HMR          |
| `pnpm build`  | Production build                      |
| `pnpm preview`| Preview the production build locally  |
| `pnpm test`   | Run unit tests with Vitest            |
| `pnpm lint`   | ESLint static analysis                |
| `pnpm format` | Format code with Prettier             |

## Tech Stack

* React 18 + TypeScript
* Vite 5 + Tailwind CSS 3
* GSAP & Framer Motion for animations
* Headless UI for accessible components
* Supabase (REST demo)
* Vitest + React Testing Library for tests
* PWA via `vite-plugin-pwa`
* GitHub Actions CI

## Environment Variables

Copy `.env.example` to `.env.local` and populate as needed. For demo, none are required.

| Variable | Description |
|----------|-------------|
| `VITE_SUPABASE_URL` | Supabase project URL |
| `VITE_SUPABASE_ANON_KEY` | Supabase anon key |

All env vars are validated with zod in `/src/utils/env.ts`.

## Supabase Schema

```sql
-- events table
create table events (
  id bigint generated by default as identity primary key,
  title text not null,
  date timestamptz not null,
  location text,
  excerpt text
);

-- news table
create table news (
  id bigint generated by default as identity primary key,
  title text not null,
  published_at date not null,
  link text,
  image text
);
```

## Deploy

1. Build the site:
   ```bash
   pnpm build
   ```
2. Upload the contents of `dist/` to AWS S3 and attach a CloudFront distribution, or use AWS Amplify.

The site is a fully-featured PWA so < 100% uptime is possible thanks to offline cache.

### SCSS build

To compile SCSS via django-sass-processor during development:
```bash
python manage.py compilescss   # writes static/css/main.css
python manage.py collectstatic --noinput
```
Add the above two commands to your CI/CD pipeline before launching the app.

For iterative development you can run the live SCSS watcher:
```bash
pip install libsass==0.22.0  # needed once
python manage.py compilescss --verbosity 2 --watch
```
This recompiles on every save and places the CSS into `static/css/main.css`, which Django serves via `collectstatic`.

---
Â© 2024 Fayette County Republican Party
